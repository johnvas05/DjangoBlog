{% extends "base.html" %}
{% block title %}Share Post{% endblock %}

{% block content %}
<div class="max-w-lg mx-auto mt-12 bg-white rounded-xl shadow-lg p-8">
  <h1 class="text-2xl font-bold mb-4">Share “{{ post.title }}” by email</h1>

  {% if sent %}
    <div class="bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg">
      Email successfully sent!
    </div>
    <a href="{{ post.get_absolute_url }}" class="mt-6 inline-block text-blue-600 hover:underline">
      ← Back to post
    </a>
  {% else %}
    <form method="post" class="space-y-6">
      {% csrf_token %}

      <div>
        <label for="id_name" class="block text-gray-700 mb-1">Your name</label>
        <input
          type="text"
          name="name"
          id="id_name"
          value="{{ form.name.value|default_if_none:'' }}"
          required
          class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
        />
        {% if form.name.errors %}
          <p class="mt-1 text-red-600 text-sm">{{ form.name.errors.0 }}</p>
        {% endif %}
      </div>

      <div>
        <label for="id_email" class="block text-gray-700 mb-1">Your email</label>
        <input
          type="email"
          name="email"
          id="id_email"
          value="{{ form.email.value|default_if_none:'' }}"
          required
          class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
        />
        {% if form.email.errors %}
          <p class="mt-1 text-red-600 text-sm">{{ form.email.errors.0 }}</p>
        {% endif %}
      </div>

      <div>
        <label for="id_to" class="block text-gray-700 mb-1">Recipient’s email</label>
        <input
          type="email"
          name="to"
          id="id_to"
          value="{{ form.to.value|default_if_none:'' }}"
          required
          class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
        />
        {% if form.to.errors %}
          <p class="mt-1 text-red-600 text-sm">{{ form.to.errors.0 }}</p>
        {% endif %}
      </div>

      <div>
        <label for="id_comments" class="block text-gray-700 mb-1">Add a message</label>
        <textarea
          name="comments"
          id="id_comments"
          rows="4"
          class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
        >{{ form.comments.value|default_if_none:'' }}</textarea>
        {% if form.comments.errors %}
          <p class="mt-1 text-red-600 text-sm">{{ form.comments.errors.0 }}</p>
        {% endif %}
      </div>

      <button
        type="submit"
        class="w-full bg-blue-600 text-white font-semibold py-2 rounded-md hover:bg-blue-700 transition"
      >
        Send e-mail
      </button>
    </form>
  {% endif %}
</div>
{% endblock %}
